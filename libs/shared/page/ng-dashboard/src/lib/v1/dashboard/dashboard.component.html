<!-- /////////////////////////////////////////////////////////////////////// -->
<!-- Starter lib #1: X Users                                                 -->
<!-- /////////////////////////////////////////////////////////////////////// -->

<ng-template #xUsersFeaTpl>
  <x-x-users-fea-v1
    #xUsersFea
    [showErrors]="false"
    (ready)="onReadyStarterLib1()"
    (hasError)="xOnError({ page: 'parent', lib: 'xUsersFea', error: $event })"
    (selectedUser)="onXUsersSelectedUser($event)"
  ></x-x-users-fea-v1>
</ng-template>

<!-- /////////////////////////////////////////////////////////////////////// -->
<!-- Other lib: Blahblah                                                     -->
<!-- /////////////////////////////////////////////////////////////////////// -->

<ng-template #blahblahFeaTpl>
  <section>Blahblah</section>
</ng-template>

<!-- /////////////////////////////////////////////////////////////////////// -->
<!-- Other lib: X Profile Image                                              -->
<!-- /////////////////////////////////////////////////////////////////////// -->

<ng-template #xProfileImageFeaTpl>
  <section class="col-span-1">
    <x-x-profile-image-fea-v1
      [userId]="selectedUserId"
      [showErrors]="false"
      (hasError)="
        xOnError({ page: 'parent', lib: 'xProfileImageFea', error: $event })
      "
    ></x-x-profile-image-fea-v1>
  </section>
</ng-template>

<!-- /////////////////////////////////////////////////////////////////////// -->
<!-- Other lib: X Profile Info                                               -->
<!-- /////////////////////////////////////////////////////////////////////// -->

<ng-template #xProfileInfoFeaTpl>
  <section class="col-span-1">
    <x-x-profile-info-fea-v1
      [userId]="123"
      [showErrors]="false"
      (hasError)="
        xOnError({ page: 'parent', lib: 'xProfileInfoFea', error: $event })
      "
      [showBtnReadMore]="true"
      (clickedReadMore)="onXProfileInfoClickedReadMore()"
    ></x-x-profile-info-fea-v1>
  </section>
</ng-template>

<!-- /////////////////////////////////////////////////////////////////////// -->
<!-- PAGE MAIN STRUCTURE                                                     -->
<!-- /////////////////////////////////////////////////////////////////////// -->

<main>
  <!-- Starter lib #1: X Users -->
  <section class="pt-6">
    <div class="e-container">
      <ng-container *ngTemplateOutlet="xUsersFeaTpl"></ng-container>
    </div>
  </section>

  <section class="e-container mt-8">
    <div class="grid grid-cols-1 gap-8 md:grid-cols-2 lg:grid-cols-3">
      @if (isReadyStarterLib1 && funsToShowArr && funsToShowArr.length > 0) {
      @for (item of funsToShowArr; track $index) {
      <!--
      Although we're in a loop, but let's add the items by checking them
      in a IF statment one by one. Why? Because we should show them based on a
      condition.
      -->

      <!-- Other lib: Blahblah -->
      @if (false) {
      <ng-container *ngTemplateOutlet="blahblahFeaTpl"></ng-container>
      }

      <!-- Other lib: X Profile Image -->
      @if (item.showXProfileImage) {
      <ng-container *ngTemplateOutlet="xProfileImageFeaTpl"></ng-container>
      }

      <!-- Other lib: X Profile Info -->
      @if (item.showXProfileInfo) {
      <ng-container *ngTemplateOutlet="xProfileInfoFeaTpl"></ng-container>
      } } }
    </div>
  </section>
</main>

<!-- /////////////////////////////////////////////////////////////////////// -->
<!-- Show errors                                                             -->
<!-- /////////////////////////////////////////////////////////////////////// -->

@if (errors && errors.length > 0) {
<x-popup-v1
  *transloco="let t"
  [isHeadEnable]="true"
  [isOpen]="true"
  (closed)="errors = []"
>
  <div slot="head">
    <i class="bi bi-exclamation-triangle-fill mr-2"></i>
    <span class="font-semibold">{{ t('common.error') }}</span>
  </div>

  <div slot="body">
    <ng-lottie
      width="100%"
      height="180px"
      containerClass="e-ani"
      [options]="{
        path: (configFacade.dataConfigDep$ | async)?.assets?.gfxError,
        loop: false
      }"
    ></ng-lottie>
    <p class="p m-6 text-center">
      {{ t('common.error_desc') }}

      @for (error of errors; track $index) {

      <!-- Starter lib #1: X Users -->
      @if (error.lib === 'xUsersFea') {
      <small class="e-ecode">{{ error.lib }}, {{ error.error.key }}</small>
      }

      <!-- Other lib: X Profile Image -->
      @if (error.lib === 'xProfileImageFea') {
      <small class="e-ecode">{{ error.lib }}, {{ error.error.key }}</small>
      }

      <!-- Other lib: X Profile Info -->
      @if (error.lib === 'xProfileInfoFea') {
      <small class="e-ecode">{{ error.lib }}, {{ error.error.key }}</small>
      } }
    </p>
  </div>
</x-popup-v1>
}
